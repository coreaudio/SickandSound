<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Badges</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="appbar">
      <div class="app-title"><h1>Badges</h1></div>
      <div class="appbar-actions">
        <a class="btn small dark" href="index.html" title="Zurück">⬅️</a>
      </div>
    </header>

    <main class="content">
      <div class="card table-wrap">
        <div class="section-title">Verdiente Badges</div>
        <div id="badgeList" class="sub">Lade…</div>
      </div>
    </main>

    <nav class="bottomnav">
      <a class="tab" href="index.html">Liste</a>
      <a class="tab" href="hausdienst.html">Hausdienst</a>
      <a class="tab" href="rangliste.html">Rang</a>
      <a class="tab active" href="badges.html">Badges</a>
      <a class="tab" href="buchungen.html">Buchungen</a>
    </nav>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig={ /* deine Config */ };
    firebase.initializeApp(firebaseConfig);
    const db=firebase.firestore();

    async function loadBadges() {
      const snap = await db.collection("badges").orderBy("createdAt","desc").limit(20).get();
      const rows = snap.docs.map(d=>`<tr><td>${d.id}</td><td>${d.data().name}</td></tr>`).join('');
      document.getElementById('badgeList').innerHTML = `<table><thead><tr><th>User</th><th>Badge</th></tr></thead><tbody>${rows}</tbody></table>`;
    }
    loadBadges();
  </script>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js?v=20', { scope: './' }).catch(()=>{});
    }
  </script>
</body>
</html>
