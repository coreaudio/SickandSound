<script>
  const peopleKey="sick_sound_people";
  const drinksKey="sick_sound_drinks";
  let deleteMode=false;

  let people=JSON.parse(localStorage.getItem(peopleKey))||[];
  let drinks=JSON.parse(localStorage.getItem(drinksKey))||[];

  function save(){
    localStorage.setItem(peopleKey,JSON.stringify(people));
    localStorage.setItem(drinksKey,JSON.stringify(drinks));
  }

  function toggleDeleteMode(){
    deleteMode=!deleteMode;
    document.getElementById("deleteButton").innerText=
      deleteMode?"‚ùå L√∂schmodus aktiv!":"üóë L√∂schmodus";
  }

  function renderPeople(){
    let html="<h3>üë§ Personen</h3><ul>";
    people.forEach((p,i)=>{
      html+=`<li onclick="handlePersonClick(${i})">${p}</li>`;
    });
    html+="</ul>";
    document.getElementById("peopleList").innerHTML=html;
  }

  function renderDrinks(){
    let html="<h3>ü•§ Getr√§nke</h3><ul>";
    drinks.forEach((d,i)=>{
      html+=`<li onclick="handleDrinkClick(${i})">${d}</li>`;
    });
    html+="</ul>";
    document.getElementById("drinksList").innerHTML=html;
  }

  function handlePersonClick(index){
    if(deleteMode){
      if(confirm(`Person "${people[index]}" wirklich l√∂schen?`)){
        people.splice(index,1);
        save();
        renderPeople();
      }
      deleteMode=false; // L√∂schmodus automatisch aus
      document.getElementById("deleteButton").innerText="üóë L√∂schmodus";
    } else {
      // hier deine normale Personenauswahl
      alert("Ausgew√§hlt: "+people[index]);
    }
  }

  function handleDrinkClick(index){
    if(deleteMode){
      if(confirm(`Getr√§nk "${drinks[index]}" wirklich l√∂schen?`)){
        drinks.splice(index,1);
        save();
        renderDrinks();
      }
      deleteMode=false; // L√∂schmodus automatisch aus
      document.getElementById("deleteButton").innerText="üóë L√∂schmodus";
    } else {
      // hier deine normale Getr√§nk-Auswahl
      alert("Ausgew√§hlt: "+drinks[index]);
    }
  }

  window.onload=()=>{
    renderPeople();
    renderDrinks();
  }
</script>
